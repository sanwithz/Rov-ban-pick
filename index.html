<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ROV Ban/Pick Simulator</title>

    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React 18 UMD + Babel (so JSX works without bundling) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js" crossorigin></script>

    <style>
      /* Custom scrollbar for better aesthetics in dark mode */
      ::-webkit-scrollbar { width: 8px; height: 8px; }
      ::-webkit-scrollbar-track { background: #0f1724; }
      ::-webkit-scrollbar-thumb { background: #0ea5e9; border-radius: 4px; }
      ::-webkit-scrollbar-thumb:hover { background: #38bdf8; }

      /* Animation for tooltip */
      @keyframes fade-in-up {
        from { opacity: 0; transform: translateY(-90%) translateX(-50%); }
        to   { opacity: 1; transform: translateY(-100%) translateX(-50%); }
      }
      .animate-fade-in-up { animation: fade-in-up 0.2s ease-out forwards; }
    </style>
  </head>

  <body class="bg-[#0B1220] text-gray-200 antialiased font-sans">
    <div id="root"></div>

    <!-- Your app code (plain JS + JSX), transpiled in-browser by Babel -->
    <script type="text/babel">
      const { useState, useEffect, useCallback, useRef } = React;

      // --- CONSTANTS ---
      const API_URL = 'https://opensheet.elk.sh/1qmaUmM4ZSWMUe9M8T2HFMl2C1rdqeIOYz9o2kpza1ig/data';
      const BAN_SLOTS_COUNT = 4;
      const PICK_SLOTS_COUNT = 5;
      const ROLES = ["All", "Flighter", "Mage", "Carry", "Jungle", "Support"];

      const initialGameState = {
        bansA: Array(BAN_SLOTS_COUNT).fill(null),
        picksA: Array(PICK_SLOTS_COUNT).fill(null),
        bansB: Array(BAN_SLOTS_COUNT).fill(null),
        picksB: Array(PICK_SLOTS_COUNT).fill(null),
      };

      // --- SVG ICONS ---
      const GearIcon = () => (
        <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
      );

      const CloseIcon = () => (
        <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
        </svg>
      );

      // --- HELPER COMPONENTS ---
      const Header = ({ numberOfGames, activeGameIndex, onGameChange, onSettingsClick, onClear }) => (
        <header className="flex items-center justify-between p-4 bg-[#0F1724]/80 backdrop-blur-sm sticky top-0 z-30 shadow-lg shadow-black/20">
          <h1 className="text-xl font-bold tracking-wider text-white">ROV Ban/Pick</h1>
          <div className="flex items-center space-x-2">
            {Array.from({ length: numberOfGames }, (_, i) => (
              <button
                key={`game-${i}`}
                onClick={() => onGameChange(i)}
                className={`px-3 py-1 text-xs rounded-full transition-colors ${activeGameIndex === i ? 'bg-cyan-500 text-white' : 'bg-slate-700 hover:bg-slate-600'}`}
              >
                Game {i + 1}
              </button>
            ))}
          </div>
          <div className='flex items-center gap-4'>
            <button onClick={onClear} className="px-3 py-1 text-xs rounded-full bg-red-600 hover:bg-red-500 transition-colors">Clear Game</button>
            <button onClick={onSettingsClick} className="text-gray-400 hover:text-white transition-colors"><GearIcon /></button>
          </div>
        </header>
      );

      const Tooltip = ({ data, onBan, onPick, onClose }) => {
        const tooltipRef = useRef(null);
        const { hero, position } = data;

        useEffect(() => {
          const handleClickOutside = (event) => {
            if (tooltipRef.current && !tooltipRef.current.contains(event.target)) {
              onClose();
            }
          };
          document.addEventListener('mousedown', handleClickOutside);
          return () => document.removeEventListener('mousedown', handleClickOutside);
        }, [onClose]);

        return (
          <div
            ref={tooltipRef}
            style={{ top: position.top, left: position.left }}
            className="absolute z-40 bg-[#121826] p-3 rounded-lg shadow-2xl shadow-black/50 border border-slate-700 w-48 text-center animate-fade-in-up"
          >
            <h3 className="font-bold text-white">{hero.hero_name}</h3>
            <p className="text-xs text-cyan-400 mb-2">{hero.hero_type}</p>
            <div className="flex justify-center space-x-2">
              <button onClick={() => onBan(hero)} className="flex-1 bg-red-600 hover:bg-red-500 text-white text-sm font-semibold py-1 rounded-md transition-all">Ban</button>
              <button onClick={() => onPick(hero)} className="flex-1 bg-green-600 hover:bg-green-500 text-white text-sm font-semibold py-1 rounded-md transition-all">Pick</button>
            </div>
          </div>
        );
      };

      const SettingsModal = ({ settings, onUpdate, onClose }) => {
        const handleGameCountChange = (e) => {
          let value = parseInt(e.target.value, 10);
          if (isNaN(value)) value = 1;
          if (value < 1) value = 1;
          if (value > 7) value = 7;
          onUpdate({ numberOfGames: value });
        };

        const handleTimerChange = (e) => {
          let value = parseInt(e.target.value, 10);
          if (isNaN(value)) value = 10;
          if (value < 10) value = 10;
          if (value > 120) value = 120;
          onUpdate({ draftTimer: value });
        };

        return (
          <div className="fixed inset-0 bg-black/70 flex items-center justify-center z-50" onClick={onClose}>
            <div className="bg-[#0F1724] p-6 rounded-lg shadow-2xl w-full max-w-md border border-slate-700" onClick={(e) => e.stopPropagation()}>
              <h2 className="text-2xl font-bold mb-6 text-white">Settings</h2>

              <div className="mb-4">
                <label className="block text-gray-400 mb-2">Grid Density</label>
                <div className="flex space-x-2">
                  <button onClick={() => onUpdate({ density: 'compact' })} className={`px-4 py-2 rounded ${settings.density === 'compact' ? 'bg-cyan-500 text-white' : 'bg-slate-700'}`}>Compact</button>
                  <button onClick={() => onUpdate({ density: 'comfortable' })} className={`px-4 py-2 rounded ${settings.density === 'comfortable' ? 'bg-cyan-500 text-white' : 'bg-slate-700'}`}>Comfortable</button>
                </div>
              </div>

              <div className="flex items-center justify-between mb-6">
                <label className="text-gray-400">Enable Animations</label>
                <button onClick={() => onUpdate({ animations: !settings.animations })} className={`w-12 h-6 rounded-full p-1 transition-colors ${settings.animations ? 'bg-cyan-500' : 'bg-slate-700'}`}>
                  <div className={`w-4 h-4 rounded-full bg-white transform transition-transform ${settings.animations ? 'translate-x-6' : ''}`}></div>
                </button>
              </div>

              <hr className="border-slate-700 my-6" />

              <h3 className="text-xl font-bold mb-4 text-white">Game Settings</h3>
              <div className="mb-4">
                <label className="block text-gray-400 mb-1">Number of Games</label>
                <input
                  type="number"
                  value={settings.numberOfGames}
                  onChange={handleGameCountChange}
                  className="w-24 bg-slate-800 border border-slate-600 rounded px-2 py-1 text-white"
                  min="1" max="7"
                />
                <p className="text-xs text-slate-500 mt-1">Choose between 1-7 games</p>
              </div>

              <div className="mb-4">
                <label className="block text-gray-400 mb-1">Draft Timer</label>
                <div className="flex items-center gap-2">
                  <input
                    type="number"
                    value={settings.draftTimer}
                    onChange={handleTimerChange}
                    className="w-24 bg-slate-800 border border-slate-600 rounded px-2 py-1 text-white"
                    min="10" max="120"
                  />
                  <span className="text-slate-400">seconds</span>
                </div>
                <p className="text-xs text-slate-500 mt-1">Time allowed for each pick (10-120 sec)</p>
              </div>

              <div className="mb-4">
                <label className="block text-gray-400 mb-2">First Pick</label>
                <div className="flex space-x-2">
                  <button onClick={() => onUpdate({ firstPick: 'A' })} className={`px-4 py-2 rounded ${settings.firstPick === 'A' ? 'bg-cyan-500 text-white' : 'bg-slate-700'}`}>Team A</button>
                  <button onClick={() => onUpdate({ firstPick: 'B' })} className={`px-4 py-2 rounded ${settings.firstPick === 'B' ? 'bg-cyan-500 text-white' : 'bg-slate-700'}`}>Team B</button>
                </div>
              </div>

              <button onClick={onClose} className="mt-8 w-full bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-2 px-4 rounded transition-colors">
                Close
              </button>
            </div>
          </div>
        );
      };

      const Slot = ({ hero, type, onRemove, onDrop, onDragOver, placeholder }) => {
        const borderColor = type === 'ban' ? 'border-red-500' : 'border-green-500';
        return (
          <div
            onDrop={(e) => { e.preventDefault(); onDrop(e.dataTransfer.getData('heroId')); }}
            onDragOver={onDragOver}
            className="h-16 w-full bg-[#121826] rounded-md flex items-center justify-center p-1 relative ring-1 ring-inset ring-slate-700"
          >
            {hero ? (
              <div className="relative w-full h-full flex items-center justify-start gap-2">
                <img src={hero.image_url} alt={hero.hero_name} className={`h-full aspect-square rounded-md border-2 ${borderColor}`} />
                <span className="text-xs font-semibold truncate">{hero.hero_name}</span>
                <button onClick={onRemove} className="absolute top-1 right-1 bg-black/50 rounded-full text-white hover:bg-red-500 transition-colors">
                  <CloseIcon />
                </button>
              </div>
            ) : (
              <span className="text-xs text-slate-500">{placeholder}</span>
            )}
          </div>
        );
      };

      const TeamSlotsPanel = ({ team, teamName, bans, picks, onRemove, onDrop }) => {
        const handleDragOver = (e) => e.preventDefault();
        return (
          <div className="flex flex-col items-center gap-2 p-2 w-48 shrink-0 bg-[#0F1724] rounded-lg">
            <h2 className="text-lg font-bold tracking-wider text-white">{teamName}</h2>
            <div className="w-full space-y-2">
              <h3 className="text-sm font-bold text-red-500 text-center">BANS</h3>
              {bans.map((hero, i) => (
                <Slot key={`${team}-ban-${i}`} hero={hero} type="ban"
                  onRemove={() => onRemove(team, 'ban', i)}
                  onDrop={(id) => onDrop(team, 'ban', i, id)}
                  onDragOver={handleDragOver} placeholder={`BAN ${i + 1}`} />
              ))}
              <h3 className="text-sm font-bold text-green-500 text-center pt-4">PICKS</h3>
              {picks.map((hero, i) => (
                <Slot key={`${team}-pick-${i}`} hero={hero} type="pick"
                  onRemove={() => onRemove(team, 'pick', i)}
                  onDrop={(id) => onDrop(team, 'pick', i, id)}
                  onDragOver={handleDragOver} placeholder={`PICK ${i + 1}`} />
              ))}
            </div>
          </div>
        );
      };

      const AvatarGrid = ({ heroes, filter, settings, onHeroClick, onDragStart, bannedHeroes, pickedHeroes, previouslyPickedHeroes }) => {
        const filteredHeroes = heroes.filter(h => filter === 'All' || h.hero_type === filter);

        return (
          <div className={`grid gap-2 ${settings.density === 'compact' ? 'grid-cols-5 sm:grid-cols-6 md:grid-cols-8' : 'grid-cols-4 sm:grid-cols-5 md:grid-cols-7'} p-2 pr-4`}>
            {filteredHeroes.map(hero => {
              const isBanned = bannedHeroes.has(hero.hero_id);
              const isPicked = pickedHeroes.has(hero.hero_id);
              const wasPreviouslyPicked = previouslyPickedHeroes.has(hero.hero_id);
              const isDisabled = isBanned || isPicked || wasPreviouslyPicked;

              const thumbnailClasses = `
                w-full aspect-square rounded-md overflow-hidden transition-all duration-200 ease-in-out relative
                ${settings.animations ? 'transform hover:scale-110' : ''}
                ${isBanned ? 'opacity-40 ring-4 ring-red-500' : ''}
                ${isPicked ? 'ring-4 ring-green-500' : ''}
                ${wasPreviouslyPicked ? 'opacity-40' : ''}
                ${!isDisabled ? 'cursor-pointer hover:ring-4 hover:ring-cyan-400' : 'cursor-not-allowed'}
              `;

              return (
                <div
                  key={hero.hero_id}
                  draggable={!isDisabled}
                  onClick={(e) => !isDisabled && onHeroClick(hero, e)}
                  onDragStart={(e) => !isDisabled && onDragStart(hero, e)}
                  className={thumbnailClasses}
                  aria-label={hero.hero_name}
                >
                  <img src={hero.image_url} alt={hero.hero_name} className="w-full h-full object-cover" />
                  {isBanned && <div className="absolute inset-0 bg-black/50 flex items-center justify-center text-red-500 font-bold">BAN</div>}
                  {wasPreviouslyPicked && !isBanned && !isPicked && <div className="absolute inset-0 bg-black/50 flex items-center justify-center text-slate-400 font-bold">PICKED</div>}
                </div>
              );
            })}
          </div>
        );
      };

      const TeamPanel = (props) => {
        const { heroes, filter, setFilter, settings, onHeroClick, onDragStart, bannedHeroes, pickedHeroes, previouslyPickedHeroes } = props;
        return (
          <div className="bg-[#0F1724] rounded-lg shadow-lg flex-1 flex flex-col overflow-hidden min-w-0">
            <div className="flex items-center p-2 bg-[#121826] border-b border-slate-700 space-x-2 shrink-0">
              {ROLES.map(role => (
                <button key={role} onClick={() => setFilter(role)} className={`px-3 py-1 text-xs rounded-full transition-colors ${filter === role ? 'bg-cyan-500 text-white' : 'bg-slate-700 hover:bg-slate-600'}`}>{role}</button>
              ))}
            </div>
            <div className="flex-1 overflow-y-auto">
              <AvatarGrid
                heroes={heroes} filter={filter} settings={settings}
                onHeroClick={onHeroClick} onDragStart={onDragStart}
                bannedHeroes={bannedHeroes} pickedHeroes={pickedHeroes} previouslyPickedHeroes={previouslyPickedHeroes}
              />
            </div>
          </div>
        );
      };

      // --- MAIN APP COMPONENT ---
      const App = () => {
        const [heroes, setHeroes] = useState([]);
        const [loading, setLoading] = useState(true);
        const [error, setError] = useState(null);
        const [filter, setFilter] = useState('All');
        const [activeTeam, setActiveTeam] = useState('A'); // 'A' | 'B'
        const [activeGameIndex, setActiveGameIndex] = useState(0);
        const [tooltipData, setTooltipData] = useState(null);
        const [showSettings, setShowSettings] = useState(false);

        const [settings, setSettings] = useState(() => {
          try {
            const saved = localStorage.getItem('rovBanPickSettings');
            const defaults = { density: 'comfortable', animations: false, numberOfGames: 3, draftTimer: 30, firstPick: 'A' };
            return saved ? { ...defaults, ...JSON.parse(saved) } : defaults;
          } catch {
            return { density: 'comfortable', animations: false, numberOfGames: 3, draftTimer: 30, firstPick: 'A' };
          }
        });

        const [gamesState, setGamesState] = useState(
          Array.from({ length: settings.numberOfGames }, () => ({ ...initialGameState }))
        );

        // Sync gamesState when numberOfGames changes
        useEffect(() => {
          setGamesState(currentGames => {
            const currentLength = currentGames.length;
            const newLength = settings.numberOfGames;
            if (currentLength === newLength) return currentGames;

            if (newLength > currentLength) {
              return [...currentGames, ...Array.from({ length: newLength - currentLength }, () => ({ ...initialGameState }))];
            }

            const newGames = currentGames.slice(0, newLength);
            if (activeGameIndex >= newLength) setActiveGameIndex(newLength - 1);
            return newGames;
          });
        }, [settings.numberOfGames, activeGameIndex]);

        const currentGameState = gamesState[activeGameIndex] || initialGameState;

        useEffect(() => {
          localStorage.setItem('rovBanPickSettings', JSON.stringify(settings));
        }, [settings]);

        // Current game bans/picks
        const currentBans = [...(currentGameState?.bansA || []), ...(currentGameState?.bansB || [])].filter(Boolean);
        const currentPicks = [...(currentGameState?.picksA || []), ...(currentGameState?.picksB || [])].filter(Boolean);
        const currentBannedHeroIds = new Set(currentBans.map(h => h.hero_id));
        const currentPickedHeroIds = new Set(currentPicks.map(h => h.hero_id));

        // Heroes picked in previous games
        const previouslyPickedHeroIds = new Set();
        for (let i = 0; i < activeGameIndex; i++) {
          const game = gamesState[i];
          if (game) {
            [...game.picksA, ...game.picksB].forEach(hero => {
              if (hero) previouslyPickedHeroIds.add(hero.hero_id);
            });
          }
        }

        // Disabled IDs
        const disabledHeroIds = new Set([
          ...currentBannedHeroIds,
          ...currentPickedHeroIds,
          ...previouslyPickedHeroIds,
        ]);

        // Fetch heroes
        useEffect(() => {
          const fetchHeroes = async () => {
            try {
              const response = await fetch(API_URL);
              if (!response.ok) throw new Error('Failed to fetch hero data.');
              const data = await response.json();
              setHeroes(data);
            } catch (err) {
              setError(err?.message || 'An unknown error occurred.');
            } finally {
              setLoading(false);
            }
          };
          fetchHeroes();
        }, []);

        const updateGameState = (team, type, newSlots) => {
          const key =
            type === 'ban'
              ? (team === 'A' ? 'bansA' : 'bansB')
              : (team === 'A' ? 'picksA' : 'picksB');
          setGamesState(prev => {
            const next = [...prev];
            next[activeGameIndex] = { ...next[activeGameIndex], [key]: newSlots };
            return next;
          });
        };

        const handleAction = useCallback((hero, type) => {
          if (disabledHeroIds.has(hero.hero_id)) return;

          const slots =
            type === 'ban'
              ? (activeTeam === 'A' ? currentGameState.bansA : currentGameState.bansB)
              : (activeTeam === 'A' ? currentGameState.picksA : currentGameState.picksB);

          const emptyIndex = slots.findIndex(slot => slot === null);
          if (emptyIndex !== -1) {
            const newSlots = [...slots];
            newSlots[emptyIndex] = hero;
            updateGameState(activeTeam, type, newSlots);
          }
          setTooltipData(null);
        }, [activeTeam, currentGameState, disabledHeroIds, activeGameIndex]);

        const handleRemove = useCallback((team, type, index) => {
          const slots =
            type === 'ban'
              ? (team === 'A' ? currentGameState.bansA : currentGameState.bansB)
              : (team === 'A' ? currentGameState.picksA : currentGameState.picksB);

          const newSlots = [...slots];
          newSlots[index] = null;
          updateGameState(team, type, newSlots);
        }, [currentGameState, activeGameIndex]);

        const handleDrop = useCallback((team, type, index, heroId) => {
          const hero = heroes.find(h => h.hero_id === heroId);
          if (!hero || disabledHeroIds.has(heroId)) return;

          const slots =
            type === 'ban'
              ? (team === 'A' ? currentGameState.bansA : currentGameState.bansB)
              : (team === 'A' ? currentGameState.picksA : currentGameState.picksB);

          if (slots[index]) return;

          const newSlots = [...slots];
          newSlots[index] = hero;
          updateGameState(team, type, newSlots);
        }, [heroes, currentGameState, disabledHeroIds, activeGameIndex]);

        const handleHeroClick = (hero, e) => {
          const rect = e.currentTarget.getBoundingClientRect();
          setTooltipData({ hero, position: { top: rect.top, left: rect.left + rect.width / 2 } });
        };

        const handleDragStart = (hero, e) => {
          e.dataTransfer.setData('heroId', hero.hero_id);
        };

        const handleClearGame = () => {
          setGamesState(prev => {
            const next = [...prev];
            next[activeGameIndex] = { ...initialGameState };
            return next;
          });
        };

        useEffect(() => {
          const handleKeyDown = (e) => {
            if (e.key === 'Escape') {
              setTooltipData(null);
              setShowSettings(false);
            }
            if (tooltipData) {
              if (e.key.toLowerCase() === 'b') handleAction(tooltipData.hero, 'ban');
              if (e.key.toLowerCase() === 'p') handleAction(tooltipData.hero, 'pick');
            }
          };
          window.addEventListener('keydown', handleKeyDown);
          return () => window.removeEventListener('keydown', handleKeyDown);
        }, [tooltipData, handleAction]);

        if (loading) return <div className="flex items-center justify-center h-screen"><p>Loading Heroes...</p></div>;
        if (error) return <div className="flex items-center justify-center h-screen"><p className="text-red-500">Error: {error}</p></div>;

        return (
          <div className="h-screen w-screen flex flex-col dark">
            <Header
              numberOfGames={settings.numberOfGames}
              activeGameIndex={activeGameIndex}
              onGameChange={setActiveGameIndex}
              onSettingsClick={() => setShowSettings(true)}
              onClear={handleClearGame}
            />

            <main className="flex-1 flex justify-center p-2 md:p-4 gap-2 md:gap-4 min-h-0">
              <TeamSlotsPanel
                team="A"
                teamName="TEAM A"
                bans={currentGameState.bansA}
                picks={currentGameState.picksA}
                onRemove={handleRemove}
                onDrop={handleDrop}
              />

              <div className="flex-1 flex flex-col min-w-0 max-w-4xl">
                <div className="flex items-center justify-center bg-slate-800 p-1 rounded-full mb-2 shrink-0">
                  <button onClick={() => setActiveTeam('A')} className={`px-6 py-1 rounded-full text-sm font-bold transition-colors ${activeTeam === 'A' ? 'bg-cyan-500 text-white' : 'text-gray-400'}`}>TEAM A TURN</button>
                  <button onClick={() => setActiveTeam('B')} className={`px-6 py-1 rounded-full text-sm font-bold transition-colors ${activeTeam === 'B' ? 'bg-cyan-500 text-white' : 'text-gray-400'}`}>TEAM B TURN</button>
                </div>

                <TeamPanel
                  heroes={heroes}
                  filter={filter}
                  setFilter={setFilter}
                  settings={settings}
                  onHeroClick={handleHeroClick}
                  onDragStart={handleDragStart}
                  bannedHeroes={currentBannedHeroIds}
                  pickedHeroes={currentPickedHeroIds}
                  previouslyPickedHeroes={previouslyPickedHeroIds}
                />
              </div>

              <TeamSlotsPanel
                team="B"
                teamName="TEAM B"
                bans={currentGameState.bansB}
                picks={currentGameState.picksB}
                onRemove={handleRemove}
                onDrop={handleDrop}
              />
            </main>

            {tooltipData && (
              <Tooltip
                data={tooltipData}
                onBan={(h) => handleAction(h, 'ban')}
                onPick={(h) => handleAction(h, 'pick')}
                onClose={() => setTooltipData(null)}
              />
            )}

            {showSettings && (
              <SettingsModal
                settings={settings}
                onUpdate={(newSettings) => setSettings(s => ({ ...s, ...newSettings }))}
                onClose={() => setShowSettings(false)}
              />
            )}
          </div>
        );
      };

      // Mount
      const rootElement = document.getElementById('root');
      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
    </script>
  </body>
</html>
